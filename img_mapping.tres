[gd_resource type="VisualShader" load_steps=50 format=3 uid="uid://t2u5ocutlm5v"]

[sub_resource type="VisualShaderNodeTexture2DArrayParameter" id="VisualShaderNodeTexture2DArrayParameter_neq1d"]
linked_parent_graph_frame = 56
parameter_name = "maps"
qualifier = 1
texture_type = 1
color_default = 1

[sub_resource type="VisualShaderNodeTexture2DArray" id="VisualShaderNodeTexture2DArray_neq1d"]
linked_parent_graph_frame = 56
source = 1

[sub_resource type="VisualShaderNodeVectorCompose" id="VisualShaderNodeVectorCompose_ypyrg"]
linked_parent_graph_frame = 56

[sub_resource type="VisualShaderNodeInput" id="VisualShaderNodeInput_neq1d"]
linked_parent_graph_frame = 51
input_name = "vertex"

[sub_resource type="VisualShaderNodeVectorFunc" id="VisualShaderNodeVectorFunc_neq1d"]
default_input_values = [0, Vector2(0, 0)]
expanded_output_ports = [0]
linked_parent_graph_frame = 23
op_type = 0
function = 31

[sub_resource type="VisualShaderNodeFloatParameter" id="VisualShaderNodeFloatParameter_neq1d"]
parameter_name = "noise_map_coverage"
default_value_enabled = true
default_value = 16.0

[sub_resource type="VisualShaderNodeFrame" id="VisualShaderNodeFrame_neq1d"]
size = Vector2(644, 301)
title = "Get chunk coordinate"
attached_nodes = PackedInt32Array(33, 7, 21)

[sub_resource type="VisualShaderNodeFloatParameter" id="VisualShaderNodeFloatParameter_ypyrg"]
parameter_name = "noise_map_grid_width"
hint = 2
min = 1.0
max = 64.0
step = 1.0
default_value_enabled = true
default_value = 1.0

[sub_resource type="VisualShaderNodeTransformVecMult" id="VisualShaderNodeTransformVecMult_ypyrg"]
expanded_output_ports = [0]
linked_parent_graph_frame = 51

[sub_resource type="VisualShaderNodeVectorOp" id="VisualShaderNodeVectorOp_neq1d"]
default_input_values = [0, Vector2(0, 0), 1, Vector2(0, 0)]
linked_parent_graph_frame = 23
op_type = 0

[sub_resource type="VisualShaderNodeFloatOp" id="VisualShaderNodeFloatOp_5lxs3"]
default_input_values = [0, 0.0, 1, 2.0]
operator = 3

[sub_resource type="VisualShaderNodeInput" id="VisualShaderNodeInput_5lxs3"]
linked_parent_graph_frame = 51
input_name = "inv_view_matrix"

[sub_resource type="VisualShaderNodeVectorDecompose" id="VisualShaderNodeVectorDecompose_neq1d"]
default_input_values = [0, Vector2(0, 0)]
linked_parent_graph_frame = 56
op_type = 0

[sub_resource type="VisualShaderNodeCompare" id="VisualShaderNodeCompare_ypyrg"]
linked_parent_graph_frame = 58
function = 2

[sub_resource type="VisualShaderNodeSwitch" id="VisualShaderNodeSwitch_5lxs3"]
default_input_values = [0, false, 1, Vector3(0, 0, 0), 2, Vector3(0, 0, 0)]
expanded_output_ports = [0]
linked_parent_graph_frame = 58
op_type = 4

[sub_resource type="VisualShaderNodeCompare" id="VisualShaderNodeCompare_dvwbu"]
linked_parent_graph_frame = 58
function = 2

[sub_resource type="VisualShaderNodeVectorCompose" id="VisualShaderNodeVectorCompose_dvwbu"]
expanded_output_ports = [0]
linked_parent_graph_frame = 51
op_type = 0

[sub_resource type="VisualShaderNodeIntOp" id="VisualShaderNodeIntOp_ypyrg"]
linked_parent_graph_frame = 58
operator = 8

[sub_resource type="VisualShaderNodeFrame" id="VisualShaderNodeFrame_5lxs3"]
size = Vector2(764, 300)
title = "Get world vertex"
attached_nodes = PackedInt32Array(5, 4, 3, 2)

[sub_resource type="VisualShaderNodeFloatOp" id="VisualShaderNodeFloatOp_neq1d"]
linked_parent_graph_frame = 58
operator = 2

[sub_resource type="VisualShaderNodeFrame" id="VisualShaderNodeFrame_dvwbu"]
size = Vector2(644, 605)
title = "Sample texture"
attached_nodes = PackedInt32Array(10, 16, 42, 17)

[sub_resource type="VisualShaderNodeFrame" id="VisualShaderNodeFrame_u8sjs"]
size = Vector2(958, 467)
title = "Trim textures outside the relevant chunks"
attached_nodes = PackedInt32Array(50, 52, 43, 59, 44, 45)

[sub_resource type="VisualShaderNodeVectorFunc" id="VisualShaderNodeVectorFunc_f0st0"]
default_input_values = [0, Vector2(0, 0)]
expanded_output_ports = [0]
linked_parent_graph_frame = 58
op_type = 0
function = 4

[sub_resource type="VisualShaderNodeVectorFunc" id="VisualShaderNodeVectorFunc_8ps8g"]
default_input_values = [0, Vector2(0, 0)]
linked_parent_graph_frame = 77
op_type = 0
function = 18

[sub_resource type="VisualShaderNodeReroute" id="VisualShaderNodeReroute_dvwbu"]

[sub_resource type="VisualShaderNodeReroute" id="VisualShaderNodeReroute_uh2t7"]

[sub_resource type="VisualShaderNodeVectorOp" id="VisualShaderNodeVectorOp_ypyrg"]
default_input_values = [0, Vector2(0, 0), 1, Vector2(0, 0)]
linked_parent_graph_frame = 23
op_type = 0
operator = 3

[sub_resource type="VisualShaderNodeReroute" id="VisualShaderNodeReroute_u8sjs"]

[sub_resource type="VisualShaderNodeReroute" id="VisualShaderNodeReroute_f0st0"]

[sub_resource type="VisualShaderNodeReroute" id="VisualShaderNodeReroute_8ps8g"]

[sub_resource type="VisualShaderNodeReroute" id="VisualShaderNodeReroute_cr77v"]
default_input_values = [0, Vector3(0, 0, 0)]
port_type = 4

[sub_resource type="VisualShaderNodeReroute" id="VisualShaderNodeReroute_f7n7m"]
default_input_values = [0, Vector3(0, 0, 0)]
port_type = 4

[sub_resource type="VisualShaderNodeMultiplyAdd" id="VisualShaderNodeMultiplyAdd_neq1d"]
linked_parent_graph_frame = 76

[sub_resource type="VisualShaderNodeFrame" id="VisualShaderNodeFrame_ypyrg"]
size = Vector2(358, 266)
title = "Get noise texture idx based on current chunk"
attached_nodes = PackedInt32Array(75, 86)

[sub_resource type="VisualShaderNodeFrame" id="VisualShaderNodeFrame_uh2t7"]
size = Vector2(244, 233)
title = "Get chunk UV"
attached_nodes = PackedInt32Array(64)

[sub_resource type="VisualShaderNodeReroute" id="VisualShaderNodeReroute_neq1d"]
default_input_values = [0, Vector2(0, 0)]
port_type = 3

[sub_resource type="VisualShaderNodeReroute" id="VisualShaderNodeReroute_ypyrg"]

[sub_resource type="VisualShaderNodeReroute" id="VisualShaderNodeReroute_5lxs3"]

[sub_resource type="VisualShaderNodeReroute" id="VisualShaderNodeReroute_o121w"]

[sub_resource type="VisualShaderNodeReroute" id="VisualShaderNodeReroute_l0y00"]
default_input_values = [0, Vector2(0, 0)]
port_type = 3

[sub_resource type="VisualShaderNodeReroute" id="VisualShaderNodeReroute_p6wat"]
default_input_values = [0, Vector2(0, 0)]
port_type = 3

[sub_resource type="VisualShaderNodeReroute" id="VisualShaderNodeReroute_btw56"]
default_input_values = [0, Vector2(0, 0)]
port_type = 3

[sub_resource type="VisualShaderNodeReroute" id="VisualShaderNodeReroute_voymr"]
default_input_values = [0, Vector2(0, 0)]
port_type = 3

[sub_resource type="VisualShaderNodeReroute" id="VisualShaderNodeReroute_pvbfo"]
linked_parent_graph_frame = 76

[sub_resource type="VisualShaderNodeFloatOp" id="VisualShaderNodeFloatOp_ypyrg"]
operator = 4

[sub_resource type="VisualShaderNodeSwitch" id="VisualShaderNodeSwitch_dvwbu"]
default_input_values = [0, false, 1, Vector3(1, 0, 0), 2, Vector3(0, 0, 0)]
op_type = 4

[sub_resource type="VisualShaderNodeCompare" id="VisualShaderNodeCompare_uh2t7"]
default_input_values = [0, 0.0, 1, 0.0, 2, 0.5]

[sub_resource type="VisualShaderNodeInput" id="VisualShaderNodeInput_ypyrg"]
input_name = "uv"

[sub_resource type="VisualShaderNodeReroute" id="VisualShaderNodeReroute_2kx25"]
default_input_values = [0, Vector3(0, 0, 0)]
port_type = 4

[resource]
code = "shader_type spatial;
render_mode blend_mix, depth_draw_opaque, cull_back, diffuse_lambert, specular_schlick_ggx;

uniform float noise_map_coverage = 16.0;
uniform float noise_map_grid_width : hint_range(1.0, 64.0, 1.0) = 1.0;
global uniform sampler2DArray maps : source_color, hint_default_black;



void fragment() {
// Input:4
	mat4 n_out4p0 = INV_VIEW_MATRIX;


// Input:2
	vec3 n_out2p0 = VERTEX;


// TransformVectorMult:3
	vec3 n_out3p0 = (n_out4p0 * vec4(n_out2p0, 1.0)).xyz;
	float n_out3p1 = n_out3p0.r;
	float n_out3p3 = n_out3p0.b;


// VectorCompose:5
	vec2 n_out5p0 = vec2(n_out3p0.x, n_out3p3);
	float n_out5p1 = n_out5p0.r;


// Reroute:83
	vec2 n_out83p0 = n_out5p0;


// Reroute:85
	vec2 n_out85p0 = n_out83p0;


// Reroute:84
	vec2 n_out84p0 = n_out85p0;


// VectorFunc:59
	vec2 n_out59p0 = abs(n_out84p0);
	float n_out59p1 = n_out59p0.r;
	float n_out59p2 = n_out59p0.g;


// FloatParameter:22
	float n_out22p0 = noise_map_coverage;


// Reroute:72
	float n_out72p0 = n_out22p0;


// Reroute:71
	float n_out71p0 = n_out72p0;


// FloatParameter:25
	float n_out25p0 = noise_map_grid_width;


// Reroute:81
	float n_out81p0 = n_out25p0;


// FloatOp:37
	float n_in37p1 = 2.00000;
	float n_out37p0 = n_out81p0 / n_in37p1;


// Reroute:80
	float n_out80p0 = n_out37p0;


// Reroute:68
	float n_out68p0 = n_out80p0;


// Reroute:69
	float n_out69p0 = n_out68p0;


// FloatOp:52
	float n_out52p0 = n_out71p0 * n_out69p0;


// Compare:45
	bool n_out45p0 = n_out59p1 > n_out52p0;


// Compare:43
	bool n_out43p0 = n_out59p2 > n_out52p0;


// IntOp:50
	int n_out50p0 = (n_out45p0 ? 1 : 0) | (n_out43p0 ? 1 : 0);


// Reroute:82
	vec2 n_out82p0 = n_out83p0;


// VectorOp:7
	vec2 n_out7p0 = n_out82p0 / vec2(n_out72p0);


// VectorOp:33
	vec2 n_out33p0 = n_out7p0 + vec2(n_out80p0);


// Reroute:78
	vec2 n_out78p0 = n_out33p0;


// VectorFunc:64
	vec2 n_out64p0 = fract(n_out78p0);


// Reroute:73
	vec3 n_out73p0 = vec3(n_out64p0, 0.0);


// Reroute:74
	vec3 n_out74p0 = n_out73p0;


// VectorDecompose:42
	float n_out42p0 = vec2(n_out74p0.xy).x;
	float n_out42p1 = vec2(n_out74p0.xy).y;


// VectorFunc:21
	vec2 n_out21p0 = trunc(n_out33p0);
	float n_out21p1 = n_out21p0.r;
	float n_out21p2 = n_out21p0.g;


// Reroute:70
	float n_out70p0 = n_out81p0;


// Reroute:79
	float n_out79p0 = n_out70p0;


// MultiplyAdd:75
	float n_out75p0 = fma(n_out21p2, n_out79p0, n_out21p1);


// Reroute:86
	float n_out86p0 = n_out75p0;


// VectorCompose:17
	vec3 n_out17p0 = vec3(n_out42p0, n_out42p1, n_out86p0);


	vec4 n_out16p0;
// Texture2DArray:16
	n_out16p0 = texture(maps, n_out17p0);


	vec3 n_out44p0;
// Switch:44
	vec3 n_in44p1 = vec3(0.00000, 0.00000, 0.00000);
	n_out44p0 = mix(vec3(n_out16p0.xyz), n_in44p1, float(n_out50p0 > 0 ? true : false));
	float n_out44p1 = n_out44p0.r;


// Reroute:91
	vec3 n_out91p0 = n_out44p0;


// Output:0
	ALBEDO = n_out91p0;


}
"
graph_offset = Vector2(-1075.39, -474.678)
nodes/vertex/0/position = Vector2(940, 300)
nodes/fragment/0/position = Vector2(1180, 1040)
nodes/fragment/2/node = SubResource("VisualShaderNodeInput_neq1d")
nodes/fragment/2/position = Vector2(-4040, 40)
nodes/fragment/3/node = SubResource("VisualShaderNodeTransformVecMult_ypyrg")
nodes/fragment/3/position = Vector2(-3740, -60)
nodes/fragment/4/node = SubResource("VisualShaderNodeInput_5lxs3")
nodes/fragment/4/position = Vector2(-4040, -60)
nodes/fragment/5/node = SubResource("VisualShaderNodeVectorCompose_dvwbu")
nodes/fragment/5/position = Vector2(-3520, -60)
nodes/fragment/7/node = SubResource("VisualShaderNodeVectorOp_ypyrg")
nodes/fragment/7/position = Vector2(-3220, 120)
nodes/fragment/10/node = SubResource("VisualShaderNodeTexture2DArrayParameter_neq1d")
nodes/fragment/10/position = Vector2(-2000, 320)
nodes/fragment/16/node = SubResource("VisualShaderNodeTexture2DArray_neq1d")
nodes/fragment/16/position = Vector2(-1600, 120)
nodes/fragment/17/node = SubResource("VisualShaderNodeVectorCompose_ypyrg")
nodes/fragment/17/position = Vector2(-1800, 120)
nodes/fragment/21/node = SubResource("VisualShaderNodeVectorFunc_neq1d")
nodes/fragment/21/position = Vector2(-2820, 120)
nodes/fragment/22/node = SubResource("VisualShaderNodeFloatParameter_neq1d")
nodes/fragment/22/position = Vector2(-3560, 220)
nodes/fragment/23/node = SubResource("VisualShaderNodeFrame_neq1d")
nodes/fragment/23/position = Vector2(-3260, 80)
nodes/fragment/25/node = SubResource("VisualShaderNodeFloatParameter_ypyrg")
nodes/fragment/25/position = Vector2(-3560, 500)
nodes/fragment/33/node = SubResource("VisualShaderNodeVectorOp_neq1d")
nodes/fragment/33/position = Vector2(-3020, 120)
nodes/fragment/37/node = SubResource("VisualShaderNodeFloatOp_5lxs3")
nodes/fragment/37/position = Vector2(-3240, 400)
nodes/fragment/42/node = SubResource("VisualShaderNodeVectorDecompose_neq1d")
nodes/fragment/42/position = Vector2(-2000, 120)
nodes/fragment/43/node = SubResource("VisualShaderNodeCompare_ypyrg")
nodes/fragment/43/position = Vector2(-1780, -180)
nodes/fragment/44/node = SubResource("VisualShaderNodeSwitch_5lxs3")
nodes/fragment/44/position = Vector2(-1340, -380)
nodes/fragment/45/node = SubResource("VisualShaderNodeCompare_dvwbu")
nodes/fragment/45/position = Vector2(-1780, -380)
nodes/fragment/50/node = SubResource("VisualShaderNodeIntOp_ypyrg")
nodes/fragment/50/position = Vector2(-1560, -380)
nodes/fragment/51/node = SubResource("VisualShaderNodeFrame_5lxs3")
nodes/fragment/51/position = Vector2(-4080, -100)
nodes/fragment/52/node = SubResource("VisualShaderNodeFloatOp_neq1d")
nodes/fragment/52/position = Vector2(-2000, -380)
nodes/fragment/56/node = SubResource("VisualShaderNodeFrame_dvwbu")
nodes/fragment/56/position = Vector2(-2040, 80)
nodes/fragment/58/node = SubResource("VisualShaderNodeFrame_u8sjs")
nodes/fragment/58/position = Vector2(-2040, -420)
nodes/fragment/59/node = SubResource("VisualShaderNodeVectorFunc_f0st0")
nodes/fragment/59/position = Vector2(-2000, -220)
nodes/fragment/64/node = SubResource("VisualShaderNodeVectorFunc_8ps8g")
nodes/fragment/64/position = Vector2(-2520, 400)
nodes/fragment/68/node = SubResource("VisualShaderNodeReroute_dvwbu")
nodes/fragment/68/position = Vector2(-2620, 440)
nodes/fragment/69/node = SubResource("VisualShaderNodeReroute_uh2t7")
nodes/fragment/69/position = Vector2(-2620, -300)
nodes/fragment/70/node = SubResource("VisualShaderNodeReroute_u8sjs")
nodes/fragment/70/position = Vector2(-2600, 520)
nodes/fragment/71/node = SubResource("VisualShaderNodeReroute_f0st0")
nodes/fragment/71/position = Vector2(-3300, -320)
nodes/fragment/72/node = SubResource("VisualShaderNodeReroute_8ps8g")
nodes/fragment/72/position = Vector2(-3300, 240)
nodes/fragment/73/node = SubResource("VisualShaderNodeReroute_cr77v")
nodes/fragment/73/position = Vector2(-2080, 480)
nodes/fragment/74/node = SubResource("VisualShaderNodeReroute_f7n7m")
nodes/fragment/74/position = Vector2(-2080, 160)
nodes/fragment/75/node = SubResource("VisualShaderNodeMultiplyAdd_neq1d")
nodes/fragment/75/position = Vector2(-2520, 120)
nodes/fragment/76/node = SubResource("VisualShaderNodeFrame_ypyrg")
nodes/fragment/76/position = Vector2(-2560, 80)
nodes/fragment/77/node = SubResource("VisualShaderNodeFrame_uh2t7")
nodes/fragment/77/position = Vector2(-2560, 360)
nodes/fragment/78/node = SubResource("VisualShaderNodeReroute_neq1d")
nodes/fragment/78/position = Vector2(-2860, 480)
nodes/fragment/79/node = SubResource("VisualShaderNodeReroute_ypyrg")
nodes/fragment/79/position = Vector2(-2600, 260)
nodes/fragment/80/node = SubResource("VisualShaderNodeReroute_5lxs3")
nodes/fragment/80/position = Vector2(-3060, 440)
nodes/fragment/81/node = SubResource("VisualShaderNodeReroute_o121w")
nodes/fragment/81/position = Vector2(-3280, 520)
nodes/fragment/82/node = SubResource("VisualShaderNodeReroute_l0y00")
nodes/fragment/82/position = Vector2(-3320, 200)
nodes/fragment/83/node = SubResource("VisualShaderNodeReroute_p6wat")
nodes/fragment/83/position = Vector2(-3320.97, -16.9412)
nodes/fragment/84/node = SubResource("VisualShaderNodeReroute_btw56")
nodes/fragment/84/position = Vector2(-2100, -140)
nodes/fragment/85/node = SubResource("VisualShaderNodeReroute_voymr")
nodes/fragment/85/position = Vector2(-2100, -20)
nodes/fragment/86/node = SubResource("VisualShaderNodeReroute_pvbfo")
nodes/fragment/86/position = Vector2(-2360, 240)
nodes/fragment/87/node = SubResource("VisualShaderNodeFloatOp_ypyrg")
nodes/fragment/87/position = Vector2(-880, -160)
nodes/fragment/88/node = SubResource("VisualShaderNodeSwitch_dvwbu")
nodes/fragment/88/position = Vector2(-380, -300)
nodes/fragment/89/node = SubResource("VisualShaderNodeCompare_uh2t7")
nodes/fragment/89/position = Vector2(-640, -120)
nodes/fragment/90/node = SubResource("VisualShaderNodeInput_ypyrg")
nodes/fragment/90/position = Vector2(660, 1160)
nodes/fragment/91/node = SubResource("VisualShaderNodeReroute_2kx25")
nodes/fragment/91/position = Vector2(40, -200)
nodes/fragment/connections = PackedInt32Array(2, 0, 3, 1, 4, 0, 3, 0, 3, 1, 5, 0, 10, 0, 16, 2, 17, 0, 16, 0, 33, 0, 21, 0, 42, 0, 17, 0, 42, 1, 17, 1, 16, 0, 44, 2, 52, 0, 45, 1, 52, 0, 43, 1, 50, 0, 44, 0, 59, 2, 43, 0, 59, 1, 45, 0, 45, 0, 50, 0, 43, 0, 50, 1, 68, 0, 69, 0, 69, 0, 52, 1, 71, 0, 52, 0, 72, 0, 7, 1, 72, 0, 71, 0, 64, 0, 73, 0, 73, 0, 74, 0, 21, 2, 75, 0, 21, 1, 75, 2, 33, 0, 78, 0, 78, 0, 64, 0, 70, 0, 79, 0, 79, 0, 75, 1, 37, 0, 80, 0, 80, 0, 68, 0, 80, 0, 33, 1, 81, 0, 70, 0, 82, 0, 7, 0, 5, 0, 83, 0, 83, 0, 82, 0, 84, 0, 59, 0, 83, 0, 85, 0, 85, 0, 84, 0, 75, 0, 86, 0, 87, 0, 89, 0, 89, 0, 88, 0, 5, 1, 87, 0, 72, 0, 87, 1, 3, 0, 5, 0, 81, 0, 37, 0, 25, 0, 81, 0, 22, 0, 72, 0, 7, 0, 33, 0, 86, 0, 17, 2, 74, 0, 42, 0, 3, 3, 5, 1, 44, 1, 88, 2, 91, 0, 0, 0, 44, 0, 91, 0)
